{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import get from 'lodash.get'\nimport set from 'lodash.set'\nimport isArray from 'lodash.isarray'\nimport isPlainObject from 'lodash.isplainobject'\n\nclass DryReplacer {\n  data: object\n\n  constructor(data: object) {\n    this.data = data\n  }\n\n  replaceValue(key: string, value: any, data: object, template: object): void {\n    let matchedArray = String(value).match(/{{.*?}}/g)\n    \n    if (matchedArray) {\n      for (let item of matchedArray.reverse()) {\n        let patternKey = item.replace(/[{}]/g, '')\n        let templateValue = get(template, key)\n        let dataValue = get(data, patternKey)\n        let newValue = dataValue\n\n        if (['string'].includes(typeof dataValue)) {\n          newValue = templateValue.replace(new RegExp(item), dataValue)\n        }\n\n        set(template, key, newValue)\n      }\n    }\n  }\n\n  recursiveReplace(data: object, template: any): object {\n    for (let key of Object.keys(template)) {\n      let value = template[key]\n\n      if (isPlainObject(value)) {\n        this.recursiveReplace(data, value)\n      } else if (isArray(value)) {\n        value.map((item) => this.recursiveReplace(data, item))\n      } else {\n        this.replaceValue(key, value, data, template)\n      }\n    }\n    return template\n  }\n\n  try(jsonToParse: string): object {\n    let template = JSON.parse(jsonToParse)\n    this.recursiveReplace(this.data, template)\n\n    return template\n  }\n}\n\nexport default DryReplacer"],"names":["DryReplacer","data","this","replaceValue","key","value","template","matchedArray","String","match","_step","reverse","_iterator","done","item","patternKey","replace","templateValue","get","dataValue","newValue","includes","RegExp","set","recursiveReplace","_this","Object","keys","_i","_Object$keys","length","isPlainObject","isArray","map","_proto","jsonToParse","JSON","parse"],"mappings":"oZAQE,WAAA,SAAAA,EAAYC,GAFZA,KAAAA,UAGE,EAAAC,KAAKD,KAAOA,CACd,CAAC,IAEDE,EAAAA,EAAAA,UAuCC,OAvCDA,EAAAA,aAAA,SAAaC,EAAaC,EAAYJ,EAAcK,GAClD,IAAIC,EAAeC,OAAOH,GAAOI,MAAM,YAEvC,GAAIF,EACF,IAAiBA,IAAsBG,EAAtBH,2qBAAAA,CAAAA,EAAaI,aAASD,EAAAE,KAAAC,MAAE,CAAhCC,IAAAA,EACPJ,EAAAL,MAAcU,EAAGD,EAAKE,QAAQ,QAAS,IACnCC,EAAgBC,UAAIZ,EAAUF,GAC9Be,EAAYD,EAAAA,QAAIjB,EAAMc,GACdK,EAAGD,EAEX,CAAC,UAAUE,gBAAgBF,KAC7BC,EAAWH,EAAcD,QAAQ,IAAUM,OAACR,GAAOK,IAGrDI,EAAAA,QAAIjB,EAAUF,EAAKgB,EACpB,CAEL,IAEAI,iBAAA,SAAiBvB,EAAcK,GAC7B,IAD0C,IAAAmB,EAAAvB,KAC1BwB,EAAAA,EAAAA,EAAAA,OAAOC,KAAKrB,GAASsB,EAAAC,EAAAC,OAAAF,IAAE,CAAlC,IAAIxB,EACPyB,EAAAD,GAASvB,EAAGC,EAASF,GAEjB2B,UAAc1B,GAChBH,KAAKsB,iBAAiBvB,EAAMI,GACnB2B,EAAO,QAAC3B,GACjBA,EAAM4B,IAAI,SAACnB,GAAI,OAASW,EAACD,iBAAiBvB,EAAMa,EAAK,GAErDZ,KAAKC,aAAaC,EAAKC,EAAOJ,EAAMK,EAEvC,CACD,OAAOA,CACT,EAAC4B,EAAA,IAED,SAAIC,GACF,IAAI7B,EAAW8B,KAAKC,MAAMF,GAG1B,OAFAjC,KAAKsB,iBAAiBtB,KAAKD,KAAMK,GAE1BA,CACT,EAACN,CAAA,CA3CD"}